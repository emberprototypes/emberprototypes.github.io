<!doctype html><html lang="en"><head><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat"><title>Camera XY Calibration</title><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><style>body{font-family:Montserrat;text-align:center}button{font-family:Montserrat;text-align:center}#videoContainer{position:relative;margin:auto;width:500px;height:375px;border-style:double;overflow:hidden}#videoStream{width:500px;height:375px;background-color:#000}#crosshairOverlay{position:absolute;width:100px;height:100px;left:200px;top:137.5px}</style></head><body><a href="https://www.emberprototypes.com/products/cxc" target="_blank"><img src="../images/Black Logo.png" alt="Ember background" class="center" style="max-width:400px;min-width:400px"><br><hr style="width:500px;height:5px;background-color:#e6e6e6;border-width:0"><br></a><h2 style="font-weight:1000">Camera Assisted XY Offset Calibration</h2><p>Follow the instructions in the user manual to calibrate:</p><a href="https://drive.google.com/file/d/1kBHQkrujYlfWvHdGmklLLmi-EM_ri_2X/view" target="_blank">Click here for user manual & troubleshooting</a><br><br><br><div id="videoContainer"><video autoplay="true" id="videoStream"></video><img id="crosshairOverlay" src="../images/Crosshair.png" alt="Image crosshair"></div><br>
<script>
    function findCamera(e){var t=null,n=document.querySelector("#videoStream");for(let u=0;u<e.length;u++){const a=e[u];if(debugOutput(a.label),debugOutput(a.deviceId),a.label.includes("HD Camera")&&!a.label.includes("FaceTime")){t=a.deviceId,navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:t}}}).then(function(e){n.srcObject=e}).catch(function(e){debugOutput("Error streaming video")}),debugOutput("CXC camera connected!");break}}null==t&&(debugOutput("Could not find the CXC Camera",t),alert("Could not find the CXC Camera!"))}async function cameraConnect(){navigator.mediaDevices.getUserMedia&&(debugOutput("Attempting to get permissions, enumerate, and connect to CXC camera..."),await navigator.mediaDevices.getUserMedia({video:!0}),navigator.mediaDevices.enumerateDevices().then(findCamera).catch(function(e){debugOutput("Error enumerating or connecting to devices")}))}function debugOutput(e){console.log(e)}function calculateOffsets(){debugOutput("Calculating offsets...");var e=document.getElementById("x0").value,t=document.getElementById("x1").value,n=document.getElementById("x2").value,u=document.getElementById("x3").value,a=document.getElementById("x4").value,o=document.getElementById("y0").value,d=document.getElementById("y1").value,c=document.getElementById("y2").value,l=document.getElementById("y3").value,i=document.getElementById("y4").value,m=(e-t).toFixed(2)+" / "+(e-n).toFixed(2)+" / "+(e-u).toFixed(2)+" / "+(e-a).toFixed(2),r=(o-d).toFixed(2)+" / "+(o-c).toFixed(2)+" / "+(o-l).toFixed(2)+" / "+(o-i).toFixed(2);document.getElementById("calibrationX").value=m,document.getElementById("calibrationY").value=r,debugOutput(m),debugOutput(r)}function zoomIn(){currentZoomValue<3&&(currentZoomValue+=.5),document.getElementById("videoStream").style.transform="scale("+currentZoomValue+")"}function zoomOut(){currentZoomValue>1&&(currentZoomValue-=.5),document.getElementById("videoStream").style.transform="scale("+currentZoomValue+")"}function setTwoNumberDecimal(e){e.value=parseFloat(e.value).toFixed(2)}var currentZoomValue=1;cameraConnect();
</script>
<button onclick="zoomIn()">&nbsp;&nbsp;&nbsp;Zoom In&nbsp;&nbsp;</button>&nbsp;<button onclick="zoomOut()">Zoom Out</button><br><br><form><p style="font-weight:600">X0: <input type="number" name="x0" id="x0" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y0: <input type="number" name="y0" id="y0" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)"><br><br>X1: <input type="number" name="x1" id="x1" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y1: <input type="number" name="y1" id="y1" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)"><br><br>X2: <input type="number" name="x2" id="x2" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y2: <input type="number" name="y2" id="y2" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)"><br><br>X3: <input type="number" name="x3" id="x3" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y3: <input type="number" name="y3" id="y3" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)"><br><br>X4: <input type="number" name="x4" id="x4" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y4: <input type="number" name="y4" id="y4" step="0.01" value="0.00" onchange="setTwoNumberDecimal(this)"><br></p></form><br><button onclick="calculateOffsets()" style="font-size:larger">Calculate Offsets</button><br><br><form><p style="font-weight:600">X: <input type="text" id="calibrationX" name="calibrationX" readonly="readonly">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y: <input type="text" id="calibrationY" name="calibrationY" readonly="readonly"><br><br><br></p></form><a style="font-size:smaller" href="mailto:info@emberprototypes.com">Ember Prototypes - 2023</a></body></html>